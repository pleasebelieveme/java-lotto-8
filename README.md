# 🎰 로또 게임 (java-lotto-precourse)

## 📖 프로젝트 소개

> 우아한테크코스 프리코스 3주차 미션입니다.
>
> 로또 구매부터 당첨 확인까지 전체 프로세스를 구현한 콘솔 기반 로또 게임입니다.

### 주요 기능
- 💰 구매 금액 입력 및 로또 자동 발행
- 🎲 1~45 범위의 중복되지 않는 번호 6개 생성
- 🎯 당첨 번호 및 보너스 번호 입력
- 🏆 당첨 통계 및 수익률 계산
- ✅ 입력값 검증 및 예외 처리

---

## 🚀 실행 방법

### 요구사항
- Java 21
- Gradle

### 실행
```bash
./gradlew run
```

### 입출력 예시

**입력:**
```
구입금액을 입력해 주세요.
8000

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7
```

**출력:**
```
8개를 구매했습니다.
[8, 21, 23, 41, 42, 43] 
[3, 5, 11, 16, 32, 38] 
[7, 11, 16, 35, 36, 44] 
[1, 8, 11, 31, 41, 42] 
[13, 14, 16, 38, 42, 45] 
[7, 11, 30, 40, 42, 43] 
[2, 13, 22, 32, 38, 45] 
[1, 3, 5, 14, 22, 45]

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```

---

## 🛠️ 기술 스택

- **Language:** Java 21
- **Build Tool:** Gradle
- **Testing:** JUnit 5, AssertJ
- **Library:** camp.nextstep.edu.missionutils

---

## 📦 패키지 구조
```
src/main/java/lotto/
├── Application.java              # 프로그램 진입점
├── domain/                       # 핵심 비즈니스 로직
│   ├── Lotto.java               # 로또 번호 (6개)
│   ├── LottoTickets.java        # 여러 로또 관리
│   ├── WinningLotto.java        # 당첨 번호 + 보너스 번호
│   ├── Rank.java                # 당첨 등수 (Enum)
│   └── LottoResult.java         # 당첨 결과 및 수익률
├── service/                      # 게임 진행 조율
│   └── LottoGameService.java
├── view/                         # 입출력 처리
│   ├── InputView.java           # 사용자 입력
│   └── OutputView.java          # 결과 출력
├── validator/                    # 입력 검증
│   └── InputValidator.java
└── util/                         # 유틸리티
    └── LottoGenerator.java       # 로또 번호 생성
```

---

## ⚙️ 기능 구현 목록

### 1. 도메인 객체 구현

#### 1.1 Lotto 객체 구현

**정상 케이스:**
- [ ] 6개의 로또 번호를 저장한다
- [ ] 로또 번호는 1~45 범위의 중복되지 않는 숫자이다
- [ ] 로또 번호를 오름차순으로 정렬하여 반환한다
- [ ] 주어진 번호 리스트와 일치하는 개수를 반환한다
- [ ] 특정 번호 포함 여부를 확인한다

**예외 케이스:**
- [ ] 로또 번호가 6개가 아니면 예외 발생
- [ ] 중복된 번호가 있으면 예외 발생
- [ ] 1~45 범위를 벗어나면 예외 발생

**커밋:** `feat(domain): Lotto 객체 기본 기능 구현`

#### 1.2 Rank 열거형 구현

**정상 케이스:**
- [ ] 일치 개수와 보너스 일치 여부로 등수를 판별한다
- [ ] 각 등수별 상금을 반환한다
- [ ] 5등: 3개 일치 / 5,000원
- [ ] 4등: 4개 일치 / 50,000원
- [ ] 3등: 5개 일치 / 1,500,000원
- [ ] 2등: 5개 + 보너스 일치 / 30,000,000원
- [ ] 1등: 6개 일치 / 2,000,000,000원
- [ ] 당첨되지 않으면 NONE 반환

**커밋:** `feat(domain): Rank 열거형 구현`

#### 1.3 WinningLotto 객체 구현

**정상 케이스:**
- [ ] 당첨 번호 6개와 보너스 번호 1개를 저장한다
- [ ] 로또와 비교하여 등수를 판별한다

**예외 케이스:**
- [ ] 보너스 번호가 당첨 번호와 중복되면 예외 발생
- [ ] 보너스 번호가 1~45 범위를 벗어나면 예외 발생

**커밋:** `feat(domain): WinningLotto 객체 구현`

#### 1.4 LottoTickets 객체 구현

**정상 케이스:**
- [ ] 여러 개의 로또를 관리한다
- [ ] 구매한 로또 개수를 반환한다
- [ ] 모든 로또를 반환한다

**커밋:** `feat(domain): LottoTickets 객체 구현`

#### 1.5 LottoResult 객체 구현

**정상 케이스:**
- [ ] 등수별 당첨 개수를 저장한다
- [ ] 총 수익금을 계산한다
- [ ] 수익률을 계산한다 (소수점 둘째 자리 반올림)
- [ ] 등수별 당첨 개수를 반환한다

**커밋:** `feat(domain): LottoResult 객체 구현`

---

### 2. 입력 검증 구현

#### 2.1 구매 금액 검증

**정상 케이스:**
- [ ] 1,000원 이상의 금액이면 통과
- [ ] 1,000원 단위로 나누어떨어지면 통과

**예외 케이스:**
- [ ] 숫자가 아니면 예외 발생
- [ ] 1,000원 미만이면 예외 발생
- [ ] 1,000원으로 나누어떨어지지 않으면 예외 발생
- [ ] null이거나 빈 문자열이면 예외 발생

**커밋:** `feat(validator): 구매 금액 검증 구현`

#### 2.2 당첨 번호 검증

**정상 케이스:**
- [ ] 쉼표로 구분된 6개의 번호면 통과
- [ ] 각 번호가 1~45 범위 내에 있으면 통과
- [ ] 중복되지 않으면 통과

**예외 케이스:**
- [ ] 번호가 6개가 아니면 예외 발생
- [ ] 1~45 범위를 벗어나면 예외 발생
- [ ] 중복된 번호가 있으면 예외 발생
- [ ] 숫자가 아닌 값이 포함되면 예외 발생
- [ ] null이거나 빈 문자열이면 예외 발생

**커밋:** `feat(validator): 당첨 번호 검증 구현`

#### 2.3 보너스 번호 검증

**정상 케이스:**
- [ ] 1~45 범위의 숫자면 통과
- [ ] 당첨 번호와 중복되지 않으면 통과

**예외 케이스:**
- [ ] 숫자가 아니면 예외 발생
- [ ] 1~45 범위를 벗어나면 예외 발생
- [ ] 당첨 번호와 중복되면 예외 발생
- [ ] null이거나 빈 문자열이면 예외 발생

**커밋:** `feat(validator): 보너스 번호 검증 구현`

---

### 3. 로또 번호 생성

#### 3.1 자동 로또 번호 생성

**정상 케이스:**
- [ ] 1~45 범위에서 중복되지 않는 6개의 숫자를 생성한다
- [ ] `Randoms.pickUniqueNumbersInRange()` 사용
- [ ] 구매 금액에 맞는 개수만큼 로또를 생성한다

**커밋:** `feat(util): 로또 번호 자동 생성 구현`

---

### 4. 입출력 기능

#### 4.1 구매 금액 입력
- [ ] 입력 안내 메시지 출력
- [ ] 문자열을 정수로 변환

**커밋:** `feat(view): 구매 금액 입력 기능 구현`

#### 4.2 당첨 번호 입력
- [ ] 입력 안내 메시지 출력
- [ ] 쉼표 기준으로 번호 분리
- [ ] 각 번호의 공백 제거 및 정수 변환

**커밋:** `feat(view): 당첨 번호 입력 기능 구현`

#### 4.3 보너스 번호 입력
- [ ] 입력 안내 메시지 출력
- [ ] 문자열을 정수로 변환

**커밋:** `feat(view): 보너스 번호 입력 기능 구현`

#### 4.4 구매한 로또 출력
- [ ] "n개를 구매했습니다." 출력
- [ ] 각 로또를 오름차순 정렬하여 출력
- [ ] 형식: [번호1, 번호2, 번호3, 번호4, 번호5, 번호6]

**커밋:** `feat(view): 구매 로또 출력 기능 구현`

#### 4.5 당첨 통계 출력
- [ ] "당첨 통계" 헤더 출력
- [ ] 구분선 "---" 출력
- [ ] 각 등수별 당첨 개수 출력
- [ ] 형식: "n개 일치 (금액원) - m개"
- [ ] 2등: "5개 일치, 보너스 볼 일치 (금액원) - m개"

**커밋:** `feat(view): 당첨 통계 출력 기능 구현`

#### 4.6 수익률 출력
- [ ] "총 수익률은 n%입니다." 형식으로 출력
- [ ] 소수점 둘째 자리에서 반올림

**커밋:** `feat(view): 수익률 출력 기능 구현`

#### 4.7 에러 메시지 출력
- [ ] "[ERROR]"로 시작하는 에러 메시지 출력
- [ ] 에러 발생 후 해당 입력부터 재시도

**커밋:** `feat(view): 에러 메시지 출력 기능 구현`

---

### 5. 게임 진행 서비스

#### 5.1 LottoGameService 구현
- [ ] 구매 금액 입력 및 검증
- [ ] 로또 자동 발행
- [ ] 구매한 로또 출력
- [ ] 당첨 번호 입력 및 검증
- [ ] 보너스 번호 입력 및 검증
- [ ] 당첨 결과 계산
- [ ] 당첨 통계 및 수익률 출력
- [ ] 예외 발생 시 해당 단계부터 재시도

**커밋:** `feat(service): LottoGameService 게임 진행 로직 구현`

---

### 6. 메인 실행

#### 6.1 Application 진입점
- [ ] LottoGameService 실행
- [ ] 예외 발생 시 적절한 처리

**커밋:** `feat(app): Application 메인 실행 구현`

---

## 🏗️ 아키텍처

- **레이어드 아키텍처** (Layered Architecture) 기반
- **Package by Layer** 방식
- **Inside-Out 개발** (Domain → Validator → Util → View → Service → Application)

```
┌─────────────────┐
│  Application    │ (진입점)
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│    Service      │ (조율 + 재시도 로직)
└────┬────────────┘
     │
     ├──────────┬──────────┐
     ▼          ▼          ▼
┌─────────┐  ┌──────────┐ ┌──────────┐
│ Domain  │  │   View   │ │   Util   │
└─────────┘  └──────────┘ └──────────┘
     ▲          ▲
     │          │
┌────┴──────────┴────┐
│    Validator       │
└────────────────────┘
```

---

## ✅ 프로그래밍 요구사항 준수

- [ ] JDK 21에서 실행 가능
- [ ] indent depth 2 이하
- [ ] 3항 연산자 미사용
- [ ] else 예약어 미사용
- [ ] 함수 길이 15라인 이하
- [ ] 함수가 한 가지 일만 수행
- [ ] Java Enum 활용
- [ ] JUnit 5, AssertJ 테스트 작성
- [ ] `Randoms.pickUniqueNumbersInRange()` 사용
- [ ] `Console.readLine()` 사용
- [ ] 제공된 Lotto 클래스 활용
- [ ] UI 로직 제외 단위 테스트 작성

---

## 🧪 테스트

### 테스트 실행
```bash
./gradlew test
```

### 테스트 구조
```
src/test/java/lotto/
├── domain/
│   ├── LottoTest.java
│   ├── RankTest.java
│   ├── WinningLottoTest.java
│   ├── LottoTicketsTest.java
│   └── LottoResultTest.java
├── validator/
│   └── InputValidatorTest.java
├── util/
│   └── LottoGeneratorTest.java
└── service/
    └── LottoGameServiceTest.java
```

---

## 💭 회고

### 이번 주차 학습 목표
- [ ] Java Enum을 활용한 등수 관리
- [ ] 일급 컬렉션 패턴 적용
- [ ] 예외 발생 시 재입력 로직 구현
- [ ] 2주차 공통 피드백 반영

### 2주차 피드백 반영 사항
- [ ] 함수 분리를 통한 indent depth 관리
- [ ] Early return 패턴으로 else 제거
- [ ] 매직 넘버 상수화
- [ ] 도메인 로직과 UI 로직 분리

---

## 📚 학습 내용

- Java Enum 활용
- 일급 컬렉션 (First-Class Collection)
- 예외 처리 및 재입력 로직
- 객체 간 협력 설계
- 단위 테스트 작성
- 수익률 계산 및 포맷팅